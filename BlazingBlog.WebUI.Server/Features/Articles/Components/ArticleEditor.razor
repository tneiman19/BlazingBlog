@page "/article-editor"
@inject ISender Sender


<PageTitle>Create New Article</PageTitle>
<h3>Create New Article</h3>

<EditForm Model="Article" OnSubmit="HandleSubmit" FormName="ArticleEditorForm">
	<InputText class="form-control" @bind-Value="Article.Title"/>
	<InputTextArea class="form-control" @bind-Value="Article.Content" />
	<InputDate class="form-control" @bind-Value="Article.DatePublished" />
	<div class="form-check">
		<InputCheckbox class="form-check-input" @bind-Value="Article.IsPublished" />
		<label class="form-check-label">Is Published</label>
	</div>
	<button class="btn btn-primary" type="submit">Submit</button>
</EditForm>


@code {
	[SupplyParameterFromForm]
	ArticleModel Article { get; set; } = new();

	async Task HandleSubmit()
	{

		var command = Article.Adapt<CreateArticleCommand>();
		var result = await Sender.Send(command);
		Article = result.Adapt<ArticleModel>();

	}
}
